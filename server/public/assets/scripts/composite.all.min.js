/*! open_sesame 2016-07-04 */
angular.module("openApp",[]).controller("MainController",["$http",function(a){function b(){var a=new google.maps.LatLng(c.latitude,c.longitude),b=[],d={center:a,zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map(document.getElementById("googleMap"),d),f={location:a,radius:"2000",types:["restaurant"],keyword:"restaurant"},g=new google.maps.places.PlacesService(e);g.nearbySearch(f,function(a,c){if(c==google.maps.places.PlacesServiceStatus.OK){for(var d=0;d<a.length;d++){var f=a[d].opening_hours;if("undefined"!=typeof f&&f.open_now===!0){b.push(a[d]);var g=a[d];console.log("place:",g);new google.maps.Marker({map:e,position:g.geometry.location})}}console.log("openPlaces:",b)}})}var c=this;c.latitude,c.longitude,c.enterZip=function(){a.get("/zipcodeApi/"+c.zipcode).then(function(a){c.latitude=a.data.lat,c.longitude=a.data.lng,console.log("vm.latitude = ",c.latitude),console.log("vm.longitude = ",c.longitude),b()})},google.maps.event.addDomListener(window,"load",b)}]);