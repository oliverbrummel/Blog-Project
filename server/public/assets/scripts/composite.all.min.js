/*! open_sesame 2016-07-15 */
angular.module("openApp",[]).controller("MainController",["$http",function(a){function b(){var a=new google.maps.LatLng(c.latitude,c.longitude),b=[],d={center:a,zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map(document.getElementById("googleMap"),d),f={location:a,radius:"2000",types:["restaurant"],keyword:"restaurant"},g=new google.maps.places.PlacesService(e);g.nearbySearch(f,function(a,d){if(d==google.maps.places.PlacesServiceStatus.OK)for(var f=0;f<a.length;f++){var g=a[f].opening_hours;if("undefined"!=typeof g&&g.open_now===!0){b.push(a[f]);var h=a[f];console.log("place:",h);new google.maps.Marker({map:e,position:h.geometry.location})}}console.log("openNow:",b),c.openPlaces=b,console.log("after vm.openPlaces:",c.openPlaces)})}var c=this;c.latitude,c.longitude,c.openPlaces=[],b(),c.enterZip=function(){a.get("/zipcodeApi/"+c.zipcode).then(function(a){c.latitude=a.data.lat,c.longitude=a.data.lng,console.log("vm.latitude = ",c.latitude),console.log("vm.longitude = ",c.longitude),b(),console.log("enterZip openPlaces:",c.openPlaces)})}}]);